import{k as x,r as c,ag as a,o as w,c as b,a as e,Q as r,O as l,I as m,W as R,a6 as V,M as N}from"./@vue-330d97db.js";import{u as D,b as q}from"./vue-router-058388f3.js";import{_ as B}from"./index-951ade64.js";import"./element-plus-acb27f52.js";import"./lodash-es-32f1e46b.js";import"./@vueuse-df397a67.js";import"./@element-plus-4e918346.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-2cb15ffa.js";import"./aplayer-d80f7f58.js";import"./async-validator-10c6301d.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-5ec34e26.js";import"./vue-cookies-191b1cbf.js";import"./@highlightjs-5c1784e4.js";import"./highlight.js-a76881e7.js";import"./axios-1f2f0c0e.js";import"./docx-preview-30c6d22b.js";import"./jszip-d9c085e9.js";import"./xlsx-04f2268f.js";import"./vue-pdf-embed-021e3327.js";import"./vue-d736004e.js";import"./dplayer-ff9c2365.js";import"./vue-clipboard3-abb1cd37.js";import"./clipboard-2fdbe17c.js";const A={class:"share"},K={class:"body-content"},M={class:"code-panel"},T={class:"file-info"},E={class:"avatar"},L={class:"share-info"},O={class:"user-info"},Q={class:"nick-name"},U={class:"share-time"},W={class:"file-name"},$={class:"code-body"},j={class:"input-area"},z={__name:"ShareCheck",setup(F){const{proxy:p}=x(),h=D(),f=q(),d={getShareInfo:"/showShare/getShareInfo",checkShareCode:"/showShare/checkShareCode"},i=f.params.shareId,o=c({});(async()=>{let s=await p.Request({url:d.getShareInfo,params:{shareId:i}});s&&(o.value=s.data)})();const n=c({}),u=c(),v={code:[{required:!0,message:"请输入提取码"},{min:5,message:"提取码为5位"},{max:5,message:"提取码为5位"}]},_=async()=>{u.value.validate(async s=>{!s||!await p.Request({url:d.checkShareCode,params:{shareId:i,code:n.value.code}})||h.push(`/share/${i}`)})};return(s,t)=>{const S=a("Avatar"),I=a("el-input"),g=a("el-button"),k=a("el-form-item"),y=a("el-form");return w(),b("div",A,[e("div",K,[t[4]||(t[4]=e("div",{class:"logo"},[e("span",{class:"iconfont icon-pan"}),e("span",{class:"name"},"极简网盘")],-1)),e("div",M,[e("div",T,[e("div",E,[r(S,{userId:o.value.userId,avatar:o.value.avatar,width:50},null,8,["userId","avatar"])]),e("div",L,[e("div",O,[e("span",Q,l(o.value.nickName),1),e("span",U,"分享于 "+l(o.value.shareTime),1)]),e("div",W,"分享文件："+l(o.value.fileName),1)])]),e("div",$,[t[3]||(t[3]=e("div",{class:"tips"},"请输入提取码：",-1)),e("div",j,[r(y,{model:n.value,rules:v,ref_key:"formDataRef",ref:u,maxLength:5,onSubmit:t[1]||(t[1]=R(()=>{},["prevent"]))},{default:m(()=>[r(k,{prop:"code"},{default:m(()=>[r(I,{class:"input",modelValue:n.value.code,"onUpdate:modelValue":t[0]||(t[0]=C=>n.value.code=C),onKeyup:V(_,["enter"])},null,8,["modelValue"]),r(g,{type:"primary",onClick:_},{default:m(()=>t[2]||(t[2]=[N("提取文件")])),_:1})]),_:1})]),_:1},8,["model"])])])])])])}}},ke=B(z,[["__scopeId","data-v-8cc669c1"]]);export{ke as default};
